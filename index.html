<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ABSTERGO INDUSTRIES | NEURAL NETWORK</title>
    <link rel="icon" type="image/png" href="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/Assassins_Creed_Logo.svg/2500px-Assassins_Creed_Logo.svg.png">

    <style>
        :root { --animus-cyan: #00ffcc; --terminal-bg: #02080a; --alert-red: #ff3333; --mentor-gold: #ffcc00; }

        body, html {
            background-color: var(--terminal-bg);
            color: var(--animus-cyan);
            font-family: 'Courier New', monospace;
            height: 100%; margin: 0; overflow: hidden;
            transition: background-color 0.8s ease, color 0.8s ease;
        }

        /* THE RED ALERT THEME */
        body.breach-mode { background-color: #330000 !important; color: #ff5555 !important; }
        body.breach-mode .terminal-box { border-color: #ff0000; box-shadow: 0 0 60px #ff0000; }

        /* THE MENTOR THEME */
        body.initiation-mode { background-color: #f0f0f0 !important; color: #222 !important; }
        body.initiation-mode .terminal-box { background: rgba(255, 255, 255, 0.9); border-color: var(--mentor-gold); color: #222; }

        /* GLITCH EFFECT */
        @keyframes glitchAnim {
            0% { transform: translate(0); }
            20% { transform: translate(-10px, 5px) skew(5deg); filter: hue-rotate(90deg); }
            40% { transform: translate(10px, -5px) reverse; }
            60% { transform: translate(-10px, 0); filter: blur(1px); }
            100% { transform: translate(0); }
        }
        .glitch-active { animation: glitchAnim 0.4s linear; }

        #matrix-canvas { position: fixed; top: 0; left: 0; z-index: 1; opacity: 0.12; }
        #scanner { position: fixed; top: -10px; left: 0; width: 100%; height: 3px; background: var(--animus-cyan); z-index: 100; opacity: 0; pointer-events: none; }
        #white-room { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 9999; opacity: 0; pointer-events: none; transition: opacity 0.3s ease-out; }
        #fail-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(100, 0, 0, 0.9); z-index: 10000; display: none; justify-content: center; align-items: center; font-size: 3rem; font-weight: bold; letter-spacing: 15px; color: white; }
        .scanlines { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%); background-size: 100% 4px; z-index: 10; pointer-events: none; }

        #ui-wrapper { position: relative; z-index: 20; display: flex; flex-direction: column; align-items: center; height: 100vh; justify-content: center; }
        .insignia { width: 100px; height: 130px; margin-bottom: 20px; background-color: var(--animus-cyan); clip-path: polygon(50% 0%, 100% 100%, 85% 100%, 50% 35%, 15% 100%, 0% 100%); cursor: pointer; animation: pulseGlow 3s infinite ease-in-out; }
        
        @keyframes pulseGlow {
            0% { filter: drop-shadow(0 0 5px var(--animus-cyan)); transform: scale(1); }
            50% { filter: drop-shadow(0 0 25px var(--animus-cyan)); transform: scale(1.05); }
            100% { filter: drop-shadow(0 0 5px var(--animus-cyan)); transform: scale(1); }
        }

        .terminal-box { background: rgba(0, 10, 15, 0.95); border: 1px solid rgba(0, 255, 204, 0.2); padding: 40px; width: 85%; max-width: 700px; box-shadow: 0 0 50px rgba(0, 0, 0, 1); backdrop-filter: blur(15px); display: none; }
        .header { font-size: 1rem; letter-spacing: 10px; margin-bottom: 25px; border-bottom: 1px solid rgba(0, 255, 204, 0.1); padding-bottom: 15px; text-align: center; }
        .data-stream { font-size: 0.85rem; line-height: 1.8; height: 260px; overflow-y: auto; margin-bottom: 20px; scrollbar-width: none; }
        .btn { background: transparent; border: 1px solid var(--animus-cyan); color: inherit; padding: 10px 18px; cursor: pointer; text-transform: uppercase; letter-spacing: 2px; transition: 0.4s; margin: 5px; font-family: inherit; font-size: 0.7rem; }
        .btn:hover { background: var(--animus-cyan); color: #000; }
        input { background: rgba(255, 255, 255, 0.05); border: none; border-bottom: 1px solid var(--animus-cyan); color: inherit; padding: 15px; width: 100%; outline: none; font-family: inherit; text-align: center; }
        
        #video-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 500; display: none; }
        video { width: 100%; height: 100%; object-fit: contain; }
    </style>
</head>
<body id="main-body">

    <div id="white-room"></div>
    <div id="fail-overlay">DESYNCHRONIZED</div>
    <div id="scanner"></div>
    <canvas id="matrix-canvas"></canvas>
    <div class="scanlines"></div>

    <div id="video-container">
        <video id="memory-video" playsinline>
            <source src="videoplayback.mp4" type="video/mp4">
        </video>
    </div>

    <div id="ui-wrapper">
        <div class="insignia" id="master-insignia" onclick="initAnimus()"></div>
        <div id="init-text" style="font-size: 0.6rem; letter-spacing: 3px; opacity: 0.5;">[ PRESS TO SYNC ]</div>

        <div class="terminal-box" id="main-terminal">
            <div class="header" id="term-header">ANIMUS // MASTER_ARCHIVE</div>
            <div class="data-stream" id="stream"></div>
            
            <div id="input-area">
                <input type="text" id="passInput" placeholder="KEYCODE REQUIRED" autocomplete="off">
            </div>

            <div id="action-buttons" style="display:none; margin-top:20px; text-align: center;">
                <button class="btn" onclick="triggerTruth()">THE TRUTH</button>
                <button class="btn" onclick="showLore('altair')">ALTAÏR</button>
                <button class="btn" onclick="showLore('ezio')">EZIO</button>
                <button class="btn" onclick="showLore('nexus')">THE CONNECTION</button>
                <button class="btn" onclick="location.reload()">REBOOT</button>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');
        const stream = document.getElementById('stream');
        const video = document.getElementById('memory-video');
        let audioCtx;

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        const alphabet = "ABCDEF0123456789$+-*/=%#&_";
        const drops = Array(Math.floor(canvas.width / 16)).fill(1);

        function drawMatrix() {
            ctx.fillStyle = document.body.classList.contains('initiation-mode') ? "rgba(240, 240, 240, 0.1)" : "rgba(2, 8, 10, 0.1)";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = document.body.classList.contains('initiation-mode') ? "#ffcc00" : (document.body.classList.contains('breach-mode') ? "#ff0000" : "#00ffcc");
            ctx.font = "16px monospace";
            drops.forEach((y, i) => {
                const text = alphabet.charAt(Math.floor(Math.random() * alphabet.length));
                ctx.fillText(text, i * 16, y * 16);
                if (y * 16 > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            });
        }
        setInterval(drawMatrix, 50);

        function playLofiThud(freq, vol = 0.05) {
            if (!audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            const filter = audioCtx.createBiquadFilter();
            osc.type = 'sine'; osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            filter.type = "lowpass"; filter.frequency.setValueAtTime(200, audioCtx.currentTime); 
            gain.gain.setValueAtTime(vol, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.1);
            osc.connect(filter); filter.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + 0.1);
        }

        function triggerGlitch() {
            document.getElementById('ui-wrapper').classList.add('glitch-active');
            playLofiThud(50, 0.15);
            setTimeout(() => document.getElementById('ui-wrapper').classList.remove('glitch-active'), 400);
        }

        function triggerAnimusTransition() {
            const white = document.getElementById('white-room');
            const scanner = document.getElementById('scanner');
            white.style.opacity = "1";
            setTimeout(() => white.style.opacity = "0", 300);
            scanner.style.opacity = "1";
            scanner.animate([{ top: '-10px' }, { top: '100vh' }], { duration: 800 });
            setTimeout(() => scanner.style.opacity = "0", 800);
        }

        async function typeText(text) {
            stream.innerHTML = "";
            const lines = text.split('\n');
            for (let line of lines) {
                const lineDiv = document.createElement('div');
                lineDiv.style.marginBottom = "8px";
                stream.appendChild(lineDiv);
                for (let char of line) {
                    lineDiv.innerHTML += char;
                    if (char !== " ") playLofiThud(80 + Math.random() * 40); 
                    await new Promise(r => setTimeout(r, 20));
                    stream.scrollTop = stream.scrollHeight;
                }
            }
        }

        function initAnimus() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            triggerAnimusTransition();
            document.getElementById('master-insignia').style.display = "none";
            document.getElementById('init-text').style.display = 'none';
            document.getElementById('main-terminal').style.display = 'block';
            typeText("> CONNECTION ESTABLISHED...\n> NEURAL LINK SYNCED.\n> WAITING FOR KEYCODE...");
        }

        document.getElementById('passInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const val = this.value.toLowerCase().trim();
                this.value = ""; // Clear immediately for next command
                
                if (val === "nothing is true everything is permitted") {
                    triggerAnimusTransition();
                    this.parentElement.style.display = 'none';
                    document.getElementById('action-buttons').style.display = 'block';
                    typeText("> ACCESS GRANTED.\n> ARCHIVES SYNCED.");
                } 
                else if (val === "abstergo") {
                    document.body.classList.remove('initiation-mode');
                    document.body.classList.add('breach-mode');
                    document.getElementById('term-header').innerText = "!! SECURITY BREACH !!";
                    typeText("> ALERT: UNATHORIZED ACCESS\n> ABSTERGO PROTOCOL 404\n> TRACING IP ADDRESS...");
                    triggerGlitch();
                } 
                else if (val === "desmond") {
                    typeText("> SUBJECT 17 STATUS: DECEASED\n> 'Because I chose this.'\n> DATA RECOVERY: 100%");
                } 
                else if (val === "bleeding") {
                    triggerGlitch();
                    typeText("> ERROR: SYNCHRONIZATION FAILURE\n> BLEEDING EFFECT DETECTED...");
                }
                else if (val === "recruit") {
                    triggerAnimusTransition();
                    document.body.classList.remove('breach-mode');
                    document.body.classList.add('initiation-mode');
                    document.getElementById('term-header').innerText = "INITIATION PROTOCOL";
                    typeText("> THE PATH OF THE MENTOR REQUIRES A KEY.\n> RIDDLE: I have no voice, but I speak of the past. I have no blade, but I kill the lies. What am I?");
                }
                else if (val === "history" || val === "the truth" || val === "truth") {
                    if(document.body.classList.contains('initiation-mode')) {
                         typeText("> CORRECT. YOU ARE READY TO SERVE THE LIGHT.\n> WELCOME TO THE HIDDEN ONES.");
                    } else {
                         typeText("> KEYWORD ACCEPTED.");
                    }
                }
                else {
                    playLofiThud(50); 
                    document.getElementById('fail-overlay').style.display = 'flex';
                    setTimeout(() => { document.getElementById('fail-overlay').style.display = 'none'; }, 1200);
                }
            }
        });

        function showLore(hero) {
            triggerAnimusTransition();
            const data = {
                altair: "> ALTAÏR: Redefined the Brotherhood.",
                ezio: "> EZIO: The Prophet of the Renaissance.",
                nexus: "> THE CONNECTION: 300 years, one purpose."
            };
            typeText(data[hero]);
        }

        function triggerTruth() {
            triggerAnimusTransition();
            typeText("> LOADING THE TRUTH...");
            setTimeout(() => { document.getElementById('video-container').style.display = 'block'; video.play(); }, 1000);
        }

        video.onended = () => { window.location.href = "https://assassinscreed.fandom.com/wiki/The_Truth"; };
    </script>
</body>
</html>